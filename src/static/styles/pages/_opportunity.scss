.main-opportunity {
  padding-block-start: var(--hero-top-padding);
  overflow: hidden; // for hero img on smaller devices

  @include mq-max("lg") {
    padding-block-start: 212px;
  }

  @include mq-max("md") {
    padding-block-start: 264px;
  }

  .hero {
    @include row-end(space-between);
    isolation: isolate; // Fixes mix-blend-mode issue when opening nav 1/2
    background-color: var(--background-color); // Helps fix issue above 2/2
    position: relative;
    padding-inline-start: var(--body-padding);
    padding-block-end: var(--body-padding);
    margin: 0 var(--body-padding) var(--section-spacing);
    font-size: clamp(48px, 5vw, 96px);

    @include mq-max("md") {
      margin-inline-end: 0;
      padding-block: 24px 48px;
      font-size: 40px;
    }

    @include mq-max("sm") {
      font-size: max(24px, 8vw);
    }

    &__title {
      font-size: inherit;
      flex-shrink: 0;
      line-height: 1.4;
      color: #fff;

      @include mq-min("lg") {
        mix-blend-mode: difference;
        line-height: 1.25;
      }

      @include mq-max("md") {
        line-height: 1.5;
      }
    }

    &__picture {
      display: flex; // fixes position issue
      width: min(40%, 850px);
      translate: 0 var(--body-padding);

      @include mq-max("lg") {
        position: absolute;
        bottom: var(--body-padding);
        right: 0;
        width: 400px;
        z-index: -1;
      }

      @include mq-max("md") {
        translate: calc(var(--body-padding) * 2) 0;
      }

      @include mq-max("sm") {
        width: min(100%, 320px);
      }
    }

    &__backdrop {
      position: absolute;
      bottom: 0;
      left: 0;
      background-color: #000;
      border-radius: 0 var(--radius-lg);
      width: 100%;
      height: 14ch;
      z-index: -2;

      @include mq-max("lg") {
        height: calc(100% + var(--body-padding));
      }

      @include mq-max("md") {
        border-top-right-radius: 0;
      }
    }
  }

  .quotes-section {
    @include column-center;
    padding-inline: var(--body-padding);
    margin-block-end: var(--section-spacing);

    @include mq-max("lg") {
      gap: 128px;
    }

    .quote-block {
      @include row-center;
      gap: 64px;

      @include mq-max("lg") {
        flex-direction: column-reverse;
      }

      &:nth-of-type(even) {
        flex-direction: row-reverse;

        @include mq-max("lg") {
          flex-direction: column-reverse;
        }
      }

      // Handle additional quotes. Design only has divider for desktop
      &:has(+ .quote-block) {
        --divider-height: 250px;
        --padding: 24px;

        @include mq-max("xxl") {
          --divider-height: 180px;
        }

        @include mq-min("lg") {
          position: relative;
          margin-block-end: var(--divider-height);
          padding-block: var(--padding);

          &::after {
            content: "";
            position: absolute;
            top: 100%;
            width: 2px;
            height: var(--divider-height);
            display: block;
            background-color: var(--font-color--primary);

            @include mq-max("xxl") {
              width: 1px;
            }
          }

          & + .quote-block {
            padding-block: var(--padding);
          }
        }
      }

      &__figure {
        position: relative;
        display: flex;
        border-radius: var(--radius-lg);
        overflow: hidden;
        flex-shrink: 0;
        width: min(30%, 580px);

        @include mq-max("lg") {
          width: min(100%, 420px);
        }

        &-caption {
          @include column-start;
          @include caption-gradient;
          position: absolute;
          bottom: 0;
          padding: 12px 24px 24px;
          width: 100%;
          color: var(--background-color);

          * {
            font-family: var(--font-family-heading);
            font-weight: 600;
          }

          &__name-first {
            font-size: 1.6em;

            @include mq-max("xs") {
              font-size: 1.4em;
            }
          }
          &__name-last {
            font-size: 2.4em;

            @include mq-max("xs") {
              font-size: 1.8em;
            }
          }
          &__role {
            font-weight: 400;
          }
        }
      }

      &__quote {
        @include mq-min("lg") {
          width: 50%;
        }

        &-title {
          margin-block-end: 64px;
          font-weight: 600;

          @include mq-max("xxl") {
            margin-block-end: 48px;
          }

          @include mq-max("lg") {
            margin-block-end: 16px;
          }
        }
      }
    }
  }

  .sunder-definition {
    background-color: grey;
    height: max(100dvh, 750px);
    @include row-center;

    @include mq-max("md") {
      height: 50dvh;
    }

    &__title {
      color: var(--background-color);
      font-weight: 600;
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 1;
      pointer-events: none;

      @include mq-max("lg") {
        font-size: 5vw;
      }

      span {
        position: absolute;
        white-space: nowrap;

        &:first-of-type {
          top: 50%;
          left: 50%;
          translate: -87% -75%;
        }
        &:last-of-type {
          bottom: 50%;
          right: 50%;
          translate: 87% 75%;
          text-align: right;
        }
      }
    }

    &__video {
      $video-transition: 0.3s ease;

      display: flex; // Fixes issue

      position: relative;
      border-radius: var(--radius-lg);
      overflow: hidden;
      width: min(50vw, 1200px);
      aspect-ratio: 2 / 1.1225; // Close to original video size (before object-fit: cover)
      cursor: pointer;

      @media all {
        @include mq-max("xxl") {
          width: 60vw;
        }

        @include mq-max("xl") {
          width: 80vw;
        }

        @include mq-max("lg") {
          aspect-ratio: 2 / 1.25;
        }
      }

      // Experimental :hover & :focus-visible only on desktop
      @include non-mobile-hover {
        .sunder-definition__video-actual {
          scale: 1.05;
          filter: brightness(1.1);
        }
        .sunder-definition__video-icon-img:first-of-type {
          animation: video-icon__1 1.5s ease infinite;
        }
        .sunder-definition__video-icon-img:last-of-type {
          animation: video-icon__2 1.5s ease infinite;
        }
      }

      &-title {
        // @include caption-gradient;
        // background-color: rgba($sunder-navy, 0.5);
        background: linear-gradient(45deg, $sunder-navy, transparent);
        color: var(--background-color);
        font-weight: 600;
        text-align: left;
        width: 100%;
        height: 100%;
        z-index: 1;
        padding: var(--body-padding);

        transition: $video-transition;
      }

      &-icon {
        @include row-center;
        position: absolute;
        bottom: var(--body-padding);
        left: var(--body-padding);
        padding: 12px;
        z-index: 1;
        scale: 2.5;
        transform-origin: bottom left;
        overflow: hidden;

        transition: $video-transition;

        @include mq-max("md") {
          scale: 1.5;
        }

        @include mq-max("sm") {
          scale: 1;
        }

        &-img {
          position: absolute;
          background-color: var(--background-color);
          mask-image: url(../img/icon-play.svg);
          mask-repeat: no-repeat;
          mask-position: center;
          width: 100%;
          height: 100%;

          transition: $video-transition;

          &:first-of-type {
            translate: calc(-100% - 1ch) 0;
          }
        }
      }

      &-actual {
        position: absolute;
        width: 100%;
        height: 100%;
        object-fit: cover;

        transition: $video-transition;
      }

      &--active {
        .sunder-definition__video-title,
        .sunder-definition__video-icon {
          opacity: 0;
        }
      }
    }
  }

  .sunder-growth {
    height: 100vh;
  }
}
